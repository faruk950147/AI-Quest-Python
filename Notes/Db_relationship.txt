Django relationship ржорж╛ржирзЗ рж╣рж▓рзЛ ржоржбрзЗрж▓ржЧрзБрж▓рзЛрж░ (models) ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХ (relation) рждрзИрж░рж┐ ржХрж░рж╛ред
рждрзБржорж┐ ржпржЦржи Django рждрзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзЗржмрж┐рж▓ (models) рждрзИрж░рж┐ ржХрж░рзЛ, рждржЦржи ржЕржирзЗржХ рж╕ржорзЯ ржПржХ ржЯрзЗржмрж┐рж▓рзЗрж░ рждржерзНржп ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрж░рзНржХрж┐ржд ржерж╛ржХрзЗ тАФ ржарж┐ржХ рж╕рзЗржЗ рж╕ржорзНржкрж░рзНржХржЯрж╛ Django рждрзЗ Model Relationship ржжрж┐рзЯрзЗ ржмрзЛржЭрж╛ржирзЛ рж╣рзЯред

Django рждрзЗ ржкрзНрж░ржзрж╛ржи рзй ржзрж░ржирзЗрж░ Relationship ржЖржЫрзЗ:
Relationship	Django Field	Example	ржмрж░рзНржгржирж╛
One to One	OneToOneField	ржПржХржЬржи User ржПрж░ ржПржХржЯрж┐ ржорж╛рждрзНрж░ Profile ржерж╛ржХрзЗ	ржПржХ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХ рж░рзЛ ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХ рж░рзЛ ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХрзЗ
One to Many (Many to One)	ForeignKey	ржПржХржЯрж┐ Category рждрзЗ ржЕржирзЗржХ Product ржерж╛ржХрзЗ	ржПржХ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХ рж░рзЛ ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХрж╛ржзрж┐ржХ рж░рзЛ ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ
Many to Many	ManyToManyField	ржПржХржЬржи Student ржЕржирзЗржХ Course ржирж┐рждрзЗ ржкрж╛рж░рзЗ, ржЖрж░ ржПржХ Course ржП ржЕржирзЗржХ Student ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ	ржжрзБржЗ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХрж╛ржзрж┐ржХ рж░рзЛ ржкрж░рж╕рзНржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХрзЗ

рзз. OneToOneField (ржПржХ-ржПржХ рж╕ржорзНржкрж░рзНржХ)
from django.db import models
from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    phone = models.CharField(max_length=15)
    address = models.TextField()


ржПржЦрж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж┐ User ржПрж░ ржПржХржЯрж┐ ржХрж░рзЗ Profile ржЖржЫрзЗред

рзи. ForeignKey (ржПржХ-ржПржХрж╛ржзрж┐ржХ рж╕ржорзНржкрж░рзНржХ)
class Category(models.Model):
    name = models.CharField(max_length=100)

class Product(models.Model):
    category = models.ForeignKey(Category, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    price = models.FloatField()


ржПржХ Category рждрзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ Product ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред
(ржЕрж░рзНржерж╛рзО Product тЖТ Category рж╣рж▓рзЛ Many to One рж╕ржорзНржкрж░рзНржХ)

рзй. ManyToManyField (ржЕржирзЗржХ-ржЕржирзЗржХ рж╕ржорзНржкрж░рзНржХ)
class Student(models.Model):
    name = models.CharField(max_length=100)

class Course(models.Model):
    name = models.CharField(max_length=100)
    students = models.ManyToManyField(Student)


ржПржХржЬржи Student ржЕржирзЗржХржЧрзБрж▓рзЛ Course ржирж┐рждрзЗ ржкрж╛рж░рзЗ, ржЖрж░ ржПржХржЯрж┐ Course ржП ржЕржирзЗржХ Student ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

Bonus Tip:

ржкрзНрж░рждрж┐ржЯрж┐ relationship ржП on_delete ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржерж╛ржХрзЗ:

models.CASCADE тЖТ parent delete рж╣рж▓рзЗ child ржУ delete рж╣ржмрзЗред

models.SET_NULL тЖТ parent delete рж╣рж▓рзЗ child ржП NULL ржмрж╕ржмрзЗред

models.PROTECT тЖТ parent delete рж╣рждрзЗ ржжрзЗржмрзЗ ржирж╛ред

models.DO_NOTHING тЖТ ржХрж┐ржЫрзБржЗ ржХрж░ржмрзЗ ржирж╛ред

"ржХрж┐ржнрж╛ржмрзЗ ржмрзБржЭржмрзЛ ржХржЦржи relationship ржжрж░ржХрж╛рж░?" тАФ ржПржЗ ржЬрж┐ржирж┐рж╕ржЯрж╛ржЗ Django (ржмрж╛ ржпрзЗржХрзЛржирзЛ database design)-ржПрж░ main logic ржмрзЛржЭрж╛рж░ ржЪрж╛ржмрж┐ржХрж╛ржарж┐

Step-by-Step ржнрж╛ржмрж╛рж░ ржкржжрзНржзрждрж┐

рждрзБржорж┐ ржпржЦржи Django ржоржбрзЗрж▓ ржмрж╛ржирж╛ржУ, рждржЦржи ржкрзНрж░рждрж┐ржЯрж╛ ржоржбрзЗрж▓ ржПржХ ржПржХржЯрж╛ table рж╣рзЯ (ржпрзЗржоржи: Shop, Product, Order ржЗрждрзНржпрж╛ржжрж┐)ред
ржПржЦржи рждрзЛржорж╛рж░ ржХрж╛ржЬ тАФ ржнрж╛ржмрж╛, тАЬржПржЗ ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ ржХрзЛржирзЛ рж╕ржорзНржкрж░рзНржХ ржЖржЫрзЗ ржХрж┐ ржирж╛?тАЭ


Step 1: ржкрзНрж░рж╢рзНржи ржХрж░рзЛ тАФ

ржПржЗ ржЬрж┐ржирж┐рж╕ржЯрж╛ ржЕржирзНржп ржЬрж┐ржирж┐рж╕рзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржХрж┐ ржирж╛?

ржпржжрж┐ ржЙрждрзНрждрж░ тАЬрж╣рзНржпрж╛ржБтАЭ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ relationship рж▓рж╛ржЧржмрзЗред

Example ржжрж┐рзЯрзЗ ржмрзБржЭрзЛ

ржзрж░рзЛ рждрзБржорж┐ ржПржХржЯрж╛ Market Project ржмрж╛ржирж╛ржЪрзНржЫрзЛред

рждрзЛржорж╛рж░ ржоржбрзЗрж▓ ржЖржЫрзЗ:

Shop

Product

Customer

Order

ржПржЦржи ржкрзНрж░рждрж┐ржЯрж╛рж░ рж╕ржорзНржкрж░рзНржХ ржЪрж┐ржирзНрждрж╛ ржХрж░рзЛ:
Shop & Product

ржПржХ ржжрзЛржХрж╛ржирзЗ ржЕржирзЗржХ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ?
рж╣рзНржпрж╛ржБред

рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ One-to-Many рж╕ржорзНржкрж░рзНржХ тЖТ ForeignKey

class Product(models.Model):
    shop = models.ForeignKey(Shop, on_delete=models.CASCADE)

Customer & Order

ржПржХржЬржи ржХрж╛рж╕рзНржЯржорж╛рж░ ржЕржирзЗржХ ржЕрж░рзНржбрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ?
рж╣рзНржпрж╛ржБред

рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ржУ One-to-Many тЖТ ForeignKey

class Order(models.Model):
    customer = models.ForeignKey(Customer, on_delete=models.CASCADE)

Order & Product

ржПржХ ржЕрж░рзНржбрж╛рж░рзЗ ржЕржирзЗржХ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ?
рж╣рзНржпрж╛ржБред

ржЖрж░ ржПржХржЗ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЕржирзЗржХ ржЕрж░рзНржбрж╛рж░рзЗ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ?
рж╣рзНржпрж╛ржБред

рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ Many-to-Many рж╕ржорзНржкрж░рзНржХред

class Order(models.Model):
    products = models.ManyToManyField(Product)

ЁЯкк Customer & Profile

ржПржХржЬржи ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ ржПржХржЯрж╛ржЗ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржерж╛ржХрзЗ?
рж╣рзНржпрж╛ржБред

рждрж╛рж╣рж▓рзЗ ржПржЯрж╛ One-to-One рж╕ржорзНржкрж░рзНржХред

class Profile(models.Model):
    customer = models.OneToOneField(Customer, on_delete=models.CASCADE)

рж╕ржорзНржкрж░рзНржХрзЗрж░ ржзрж░ржи	ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ рж╣ржмрзЗ	Django Field
ржПржХржЯрж┐рж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐	ржпрзЗржоржи ржПржХржЬржи user-ржПрж░ ржПржХржЯрж╛ржЗ profile ржерж╛ржХрзЗ	OneToOneField
ржПржХржЯрж┐рж░ рж╕рж╛ржерзЗ ржЕржирзЗржХ	ржпрзЗржоржи ржПржХ category-рждрзЗ ржЕржирзЗржХ product ржерж╛ржХрзЗ	ForeignKey
ржЕржирзЗржХрзЗрж░ рж╕рж╛ржерзЗ ржЕржирзЗржХ	ржпрзЗржоржи ржПржХ student ржЕржирзЗржХ course ржирж┐рждрзЗ ржкрж╛рж░рзЗ, ржПржХ course-ржП ржЕржирзЗржХ student ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ	ManyToManyField
Shortcut Formula:

ржПржХржЯрж┐ тЖТ ржПржХржЯрж┐ тЖТ OneToOneField
ржПржХржЯрж┐ тЖТ ржЕржирзЗржХ тЖТ ForeignKey
ржЕржирзЗржХ тЖТ ржЕржирзЗржХ тЖТ ManyToManyField

ржЖрж░ржУ рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзБржЭрждрзЗ:

ржпржЦржи рждрзЛржорж╛рж░ ржоржирзЗ рж╣ржмрзЗ тАФ

тАЬржПржЗ model-ржПрж░ ржбрзЗржЯрж╛ ржЕржирзНржп model-ржПрж░ ржУржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░ржЫрзЗтАЭ
рждржЦржиржЗ relationship ржжрж░ржХрж╛рж░ред