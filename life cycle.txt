Django Request Lifecycle (Step by Step)

ржПржХржЬржи ржЗржЙржЬрж╛рж░ ржпржЦржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржерзЗржХрзЗ ржХрзЛржирзЛ URL ржП ржпрж╛рзЯ, рждржЦржи Django-рждрзЗ ржирж┐ржЪрзЗрж░ ржзрж╛ржкржЧрзБрж▓рзЛ ржШржЯрзЗ:

1 User Request (Browser тЖТ Server)

ржЗржЙржЬрж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ рж▓рж┐ржЦрж▓:

https://example.com/products/5/


Browser ржПржХржЯрж┐ HTTP Request ржкрж╛ржарж╛рзЯ Django Server ржП
(Request ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ: method, headers, cookies, data ржЗрждрзНржпрж╛ржжрж┐)

2 Web Server (WSGI / ASGI)

Django рж╕рж╛ржзрж╛рж░ржгржд ржЪрж▓рзЗ:

WSGI тЖТ Sync request

ASGI тЖТ Async / WebSocket

тЮбя╕П Web server (Gunicorn, Daphne ржЗрждрзНржпрж╛ржжрж┐)
ржПржЗ request Django app-ржП ржкрж╛ржарж╛рзЯ

3 Django Middleware (Request Phase)

ржПржЦржи request ржврзЛржХрзЗ Middleware pipeline ржПред

Middleware рж╣рж▓рзЛ filter ржПрж░ ржорждрзЛред

ржЙржжрж╛рж╣рж░ржг:

AuthenticationMiddleware

SessionMiddleware

CsrfViewMiddleware

Flow:

Request тЖТ Middleware 1 тЖТ Middleware 2 тЖТ Middleware 3


ЁЯСЙ Middleware ржкрж╛рж░рзЗ:

request block ржХрж░рждрзЗ

request modify ржХрж░рждрзЗ

user attach ржХрж░рждрзЗ (request.user)

4 URL Resolver (urls.py)

Middleware ржкрж╛рж░ рж╣рж▓рзЗ Django ржжрзЗржЦрзЗ:

# urls.py
path('products/<int:id>/', product_detail)


тЮбя╕П Django URL match ржХрж░рзЗ
тЮбя╕П ржарж┐ржХ ржХрж░рзЗ ржХрзЛржи View ржХрж▓ рж╣ржмрзЗ

ржпржжрж┐ URL ржирж╛ ржорзЗрж▓рзЗ:
тЭМ 404 Error

5 View Function / Class

ржПржЦржи View execute рж╣рзЯ:

def product_detail(request, id):
    product = Product.objects.get(id=id)
    return render(request, 'product.html', {'product': product})


View ржПрж░ ржХрж╛ржЬ:

Business logic

DB query

Data process

Response рждрзИрж░рж┐ ржХрж░рж╛

6 Model & Database (ржпржжрж┐ ржжрж░ржХрж╛рж░ рж╣рзЯ)

View ржпржжрж┐ database ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:

View тЖТ Model тЖТ ORM тЖТ Database


тЮбя╕П Query ржЪрж▓рзЗ
тЮбя╕П Result ржлрж┐рж░рзЗ ржЖрж╕рзЗ

7 Template Rendering (ржпржжрж┐ HTML рж╣рзЯ)

ржпржжрж┐ render() ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:

render(request, 'product.html', context)


тЮбя╕П Django Template Engine

HTML + context data merge ржХрж░рзЗ

Final HTML ржмрж╛ржирж╛рзЯ

8 HttpResponse рждрзИрж░рж┐

View ржерзЗржХрзЗ Django ржкрж╛рзЯ:

HttpResponse

JsonResponse

RedirectResponse

Example:

HttpResponse("<h1>Hello</h1>")

9 Middleware (Response Phase)

ржПржЦржи response ржЖржмрж╛рж░ middleware ржжрж┐рзЯрзЗ ржлрж┐рж░рзЗ ржпрж╛рзЯ:

Middleware 3 тЖТ Middleware 2 тЖТ Middleware 1 тЖТ Browser


Middleware ржкрж╛рж░рзЗ:

headers add ржХрж░рждрзЗ

cookies set ржХрж░рждрзЗ

response modify ржХрж░рждрзЗ

10 HttpResponse тЖТ Browser

рж╢рзЗрж╖рзЗ:
Django тЖТ Web Server тЖТ Browser
User output ржжрзЗржЦрзЗ ЁЯОЙ

Complete Flow Diagram (Easy)
Browser
  тЖУ
WSGI/ASGI
  тЖУ
Middleware (request)
  тЖУ
URL Resolver
  тЖУ
View
  тЖУ
Model / DB
  тЖУ
Template
  тЖУ
HttpResponse
  тЖУ
Middleware (response)
  тЖУ
Browser

Interview Important Points тнР

тЬФ Middleware order matters
тЬФ Request ржЖржЧрзЗ middleware тЖТ ржкрж░рзЗ response middleware
тЬФ urls.py рж╢рзБржзрзБ routing ржХрж░рзЗ
тЬФ View рж╣рж▓рзЛ main brain
тЬФ ORM database handle ржХрж░рзЗ